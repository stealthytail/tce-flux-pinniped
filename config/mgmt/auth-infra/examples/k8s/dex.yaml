apiVersion: v1
kind: Namespace
metadata:
    name: dex
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
apiVersion: apps/v1
kind: Deployment
metadata:
    labels:
        app: dex
    name: dex
    namespace: dex
spec:
    replicas: 3
    selector:
        matchLabels:
            app: dex
    template:
        metadata:
            labels:
                app: dex
        spec:
            serviceAccountName: dex
            containers:
                - image: ghcr.io/dexidp/dex:v2.30.0
                  name: dex
                  command:
                    - /usr/local/bin/dex
                    - serve
                    - /etc/dex/cfg/config.yaml
                  ports:
                    - name: https
                      containerPort: 5556
                  volumeMounts:
                    - name: config
                      mountPath: /etc/dex/cfg
                  env:
                    - name: GITHUB_CLIENT_ID
                      valueFrom:
                        secretKeyRef:
                            name: github-client
                            key: client-id
                    - name: GITHUB_CLIENT_SECRET
                      valueFrom:
                        secretKeyRef:
                            name: github-client
                            key: client-secret
                  readinessProbe:
                    httpGet:
                        path: /healthz
                        port: 5556
                        scheme: HTTP
            volumes:
                - name: config
                  secret:
                    secretName: dex
                    items:
                        - key: config.yaml
                          path: config.yaml
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
kind: Secret
apiVersion: v1
metadata:
    name: dex
    namespace: dex
    annotations:
        kapp.k14s.io/versioned: ""
data:
    config.yaml: ENC[AES256_GCM,data:3vZu0V61XO3Sgfy3yzeXoxQMZ2ZSrT9XoG3XZwRl0o+9OPM0aM8tAb1v6tuQjZgXsQ2OSJCvhqmjjOfCwBe10mDOL5/MweXBauIrFF5M/w6LfQHxgauEUAa9INq7epaUkLWTr3IQv6iu3jmpkdW5psNmVW5gQKh1k7z6z+d/ANZDcneYblttNefy0JKBacVMa4iSQJg7Ac4CfFlOPSzp0shI73Bauiyh3Rdd+jVLxH3riKny2GaDZo7DFlBewhONCIgxE7dfaOep8vUsmKIGyRv9hEu/FDHxpZTYmokUDu1RlQ2wVkCrLlo3o2Kv5VU8guS/RRlfXJDBOV8BF3DwTO98c6c1q53zTAoJ/h1DttR58OROxVctDOSx415KfYI6dq2ay/3NFHGHd5GYi+EX41Lx/4PL+dQt9275UnS8gDmn1FJgOGeW2obp5ua9bCL8O2SRq3euxVELuy9HahD0n9IOeSQnf/yTgqilgFTdrMxgewVBY11b8M3PvCkkli9wdTazvIrBkxmC1E72cJW5303+4xB8maYJ9+ZTxwB6R9MM5iEod9zj/CcHqtoVw2+aQM+t8uNquo2qBf2rHR9/ePQ5ZtZELCFgHMBsJ450PiHGPXcRt7gMru1K4A2NGfN6OTvMxntkCdaK7GpM3vi5CSQn68TfkvKe2Nb6Ury9D6m4WWJdAi+gB5DpVrbPXtZYANeY/kT8rjpPOTO3x5UrXbldwzeSUwAqg1izKfhpggDYV32MExkFHjej4Xz+CBRes5WgFiF6MehJzvDxgn9ajbQZRy6eH1y40s3zQiYm7ISnkIXLGF4EAPjSDEHHCmZV3CIFh9XRM2ghVNHvw6nMofqMt0XZviQG+C3tCbuqZ+92DGRu6xFXQ8Ubyf+jAeffhTxwAhnJfJcNmRuEByCBNVlKI5q8O43QHqVKkpl9yUIqBj8d0DQbeEUhQ2spKMMdYuB+jv04kUQ=,iv:0PVoFoC3RhR+/J2TZWDqT0MMJnm4eprcuyVQfr0wLvk=,tag:/EPOL0k0TRGPNaZIqXOPMg==,type:str]
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
apiVersion: v1
kind: Service
metadata:
    name: dex
    namespace: dex
spec:
    type: ClusterIP
    ports:
        - name: dex
          port: 5556
          protocol: TCP
          targetPort: 5556
    selector:
        app: dex
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
apiVersion: v1
kind: ServiceAccount
metadata:
    labels:
        app: dex
    name: dex
    namespace: dex
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
    name: dex
rules:
    - apiGroups:
        - dex.coreos.com
      resources:
        - '*'
      verbs:
        - '*'
    - apiGroups:
        - apiextensions.k8s.io
      resources:
        - customresourcedefinitions
      verbs:
        - create
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
    name: dex
roleRef:
    apiGroup: rbac.authorization.k8s.io
    kind: ClusterRole
    name: dex
subjects:
    - kind: ServiceAccount
      name: dex
      namespace: dex
sops:
    kms: []
    gcp_kms: []
    azure_kv: []
    hc_vault: []
    age:
        - recipient: age1e25ew05v62a720vhsetzrhalehzpsv6l6c5usw2mn4lley85ssnsajz2v3
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBTRnp0QkZ6OTFZVHNiejFZ
            Z0ZnbWc2azlHdWZRZ0JpK2RYUjdIM3YwOXdjCndSZ1U2QkZaYUhsNlhWRHplUkhT
            TVYzQmgrejFJQ0NtKzZ5amtHSVpVd0UKLS0tIHpneXNGSThDdldyem5yZDA2akhj
            dmhlRmZBSkNPM1VseDUzazdNblVlSzgKucrt/JXc7I2SHmt+YPoxHKYb931nGEo2
            bY1SMcfVmVDvBj4BB1ft+qmz2W1c4Fu8TZy1VQ24dd3o9vG58y+ZOQ==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2022-03-23T10:07:19Z"
    mac: ENC[AES256_GCM,data:z+XvIMh7VIomKPeNV9zCSCUUOSGV7iIDKF/0MuipDhHX2WlviT7aesfN37EvH2hQef+NRQYRJuWNVGukUEFrbfWN+mxVlsGJ3Gq1wz3N9Gv1QRURj7Y2sFL50oPPbA+9qs88MvN9nc1MiKXiEjIsJb0XrwpeWYVIEje+BpyFLqM=,iv:SaGbT8QQzZ36jzDBnJ/NMZ71XlC/dzaw1gvkpHJPKlg=,tag:c6tcl4b6y9mSdGwNVIvHkA==,type:str]
    pgp: []
    encrypted_regex: ^(data|stringData|.*client.secret.*)$
    version: 3.7.2
